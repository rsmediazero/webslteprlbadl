<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Streaming - DramaBox</title>
    <meta name="description" content="Tonton drama favorit Anda dengan kualitas streaming terbaik">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dramabox-dark': '#1a1a1a',
                        'dramabox-amber': '#f59e0b',
                        'dramabox-coral': '#fb7185',
                        'dramabox-gray': '#6b7280'
                    },
                    fontFamily: {
                        'display': ['Playfair Display', 'serif'],
                        'body': ['Inter', 'sans-serif'],
                        'mono': ['JetBrains Mono', 'monospace']
                    }
                }
            }
        }
    </script>
    
    <!-- Custom Styles -->
    <style>
        :root {
            --dramabox-dark: #1a1a1a;
            --dramabox-amber: #f59e0b;
            --dramabox-coral: #fb7185;
            --dramabox-gray: #6b7280;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--dramabox-dark);
            color: white;
            overflow-x: hidden;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #2d2d2d;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--dramabox-amber);
            border-radius: 4px;
        }

        /* Card Hover Effects */
        .drama-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
        }

        .drama-card:hover {
            transform: translateY(-8px) rotateX(5deg);
            box-shadow: 0 20px 40px rgba(245, 158, 11, 0.3);
        }

        /* Gradient Text */
        .gradient-text {
            background: linear-gradient(45deg, var(--dramabox-amber), var(--dramabox-coral));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Button Styles */
        .btn-primary {
            @apply bg-dramabox-amber hover:bg-amber-600 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105;
        }

        .btn-secondary {
            @apply bg-gray-700 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105;
        }

        /* Form Styles */
        .form-input {
            @apply bg-gray-800 border border-gray-600 text-white rounded-lg px-4 py-3 focus:outline-none focus:border-dramabox-amber transition-colors;
        }

        /* Navigation */
        .nav-link {
            @apply text-gray-300 hover:text-dramabox-amber transition-colors duration-300 font-medium;
        }

        .nav-link.active {
            @apply text-dramabox-amber font-semibold;
        }

        /* Video Player Styles */
        .video-container {
            position: relative;
            width: 100%;
            background: #000;
            border-radius: 8px;
            overflow: hidden;
        }

        .video-controls {
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            transition: opacity 0.3s ease;
        }

        .slider {
            -webkit-appearance: none;
            appearance: none;
            background: #4a5568;
            outline: none;
            border-radius: 4px;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            background: var(--dramabox-amber);
            cursor: pointer;
            border-radius: 50%;
        }

        .slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: var(--dramabox-amber);
            cursor: pointer;
            border-radius: 50%;
            border: none;
        }

        /* Loading Shimmer */
        .shimmer {
            background: linear-gradient(90deg, #2d2d2d 25%, #3d3d3d 50%, #2d2d2d 75%);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        /* Line Clamp */
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-50 bg-dramabox-dark/95 backdrop-blur-md border-b border-gray-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo -->
                <a href="index.html" class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-gradient-to-r from-dramabox-amber to-dramabox-coral rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-sm">D</span>
                    </div>
                    <span class="text-xl font-display font-bold gradient-text">DramaBox</span>
                </a>

                <!-- Desktop Navigation -->
                <nav class="hidden md:flex items-center space-x-8">
                    <a href="index.html" class="nav-link">Beranda</a>
                    <a href="latest.html" class="nav-link">Terbaru</a>
                    <a href="popular.html" class="nav-link">Populer</a>
                    <a href="ranked.html" class="nav-link">Ranking</a>
                </nav>

                <!-- Search Bar -->
                <div class="hidden md:block flex-1 max-w-md mx-8">
                    <div class="relative">
                        <input
                            type="text"
                            placeholder="Cari drama..."
                            class="form-input w-full pr-12"
                            id="searchInput"
                        />
                        <button
                            class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-dramabox-amber transition-colors"
                            onclick="performSearch()"
                        >
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Mobile Menu Button -->
                <button class="md:hidden p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-800" onclick="toggleMobileMenu()">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
            </div>

            <!-- Mobile Menu -->
            <div id="mobileMenu" class="hidden md:hidden py-4 border-t border-gray-800">
                <nav class="flex flex-col space-y-3">
                    <a href="index.html" class="nav-link">Beranda</a>
                    <a href="latest.html" class="nav-link">Terbaru</a>
                    <a href="popular.html" class="nav-link">Populer</a>
                    <a href="ranked.html" class="nav-link">Ranking</a>
                    <div class="pt-4">
                        <input type="text" placeholder="Cari drama..." class="form-input w-full" id="mobileSearchInput">
                    </div>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="min-h-screen">
        <!-- Video Player Section -->
        <section class="relative bg-black">
            <div class="relative aspect-video max-h-screen overflow-hidden" id="videoPlayer">
                <!-- Video Player Content -->
            </div>
        </section>

        <!-- Episode Selector Modal -->
        <div id="episodeSelector" class="hidden fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4">
            <div class="bg-gray-900 rounded-lg max-w-4xl w-full max-h-[80vh] overflow-hidden">
                <div class="p-6 border-b border-gray-800">
                    <div class="flex items-center justify-between">
                        <h3 class="text-xl font-semibold text-white">Pilih Episode</h3>
                        <button onclick="toggleEpisodeSelector()" class="text-gray-400 hover:text-white transition-colors">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </div>
                </div>
                
                <div class="p-6 overflow-y-auto max-h-96">
                    <div class="grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3" id="episodeGrid">
                        <!-- Episode buttons will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Drama Info Section -->
        <section class="py-8 bg-gray-900">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Drama Details -->
                    <div class="lg:col-span-2" id="dramaDetails">
                        <!-- Drama details will be loaded here -->
                    </div>

                    <!-- Episode List -->
                    <div id="episodeList">
                        <!-- Episode list will be loaded here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Related Dramas -->
        <section class="py-16">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-display font-bold text-white mb-8">Rekomendasi Serupa</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" id="relatedDramas">
                    <!-- Related dramas will be loaded here -->
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 border-t border-gray-800 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- Brand -->
                <div class="col-span-1 md:col-span-2">
                    <a href="index.html" class="flex items-center space-x-2 mb-4">
                        <div class="w-8 h-8 bg-gradient-to-r from-dramabox-amber to-dramabox-coral rounded-lg flex items-center justify-center">
                            <span class="text-white font-bold text-sm">D</span>
                        </div>
                        <span class="text-xl font-display font-bold gradient-text">DramaBox</span>
                    </a>
                    <p class="text-gray-400 max-w-md">
                        Platform streaming drama terlengkap dengan koleksi drama terbaru dan terpopuler dari berbagai genre.
                    </p>
                </div>

                <!-- Quick Links -->
                <div>
                    <h3 class="text-white font-semibold mb-4">Menu Cepat</h3>
                    <ul class="space-y-2">
                        <li>
                            <a href="latest.html" class="text-gray-400 hover:text-dramabox-amber transition-colors">
                                Drama Terbaru
                            </a>
                        </li>
                        <li>
                            <a href="popular.html" class="text-gray-400 hover:text-dramabox-amber transition-colors">
                                Drama Populer
                            </a>
                        </li>
                        <li>
                            <a href="ranked.html" class="text-gray-400 hover:text-dramabox-amber transition-colors">
                                Ranking Drama
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- Categories -->
                <div>
                    <h3 class="text-white font-semibold mb-4">Kategori</h3>
                    <ul class="space-y-2">
                        <li><span class="text-gray-400">Romance</span></li>
                        <li><span class="text-gray-400">Aksi</span></li>
                        <li><span class="text-gray-400">Komedi</span></li>
                        <li><span class="text-gray-400">Thriller</span></li>
                        <li><span class="text-gray-400">Fantasi</span></li>
                    </ul>
                </div>
            </div>

            <!-- Bottom -->
            <div class="border-t border-gray-800 mt-8 pt-8 flex flex-col md:flex-row justify-between items-center">
                <p class="text-gray-400 text-sm">
                    © 2024 DramaBox. All rights reserved.
                </p>
                <div class="flex items-center space-x-4 mt-4 md:mt-0">
                    <span class="text-gray-400 text-sm">Made with ❤️ for drama lovers</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="main.js"></script>
    <script>
        // Stream page specific functionality
        let currentEpisode = 1;
        let totalEpisodes = 24;
        let isPlaying = false;
        let currentTime = 0;
        let duration = 3600; // 60 minutes in seconds
        let volume = 1;
        let playbackSpeed = 1;
        let showControls = true;
        let controlsTimeout;

        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const bookId = urlParams.get('bookid') || '41000104061';
            currentEpisode = parseInt(urlParams.get('episode')) || 1;
            
            loadStreamPage();
        });

        function loadStreamPage() {
            loadVideoPlayer();
            loadDramaInfo();
            loadEpisodeList();
            loadRelatedDramas();
        }

        function loadVideoPlayer() {
            const container = document.getElementById('videoPlayer');
            container.innerHTML = `
                <video id="videoElement" class="w-full h-full object-contain" poster="https://images.unsplash.com/photo-1543536448-d209a7620b95?w=1920&h=1080&fit=crop">
                    <source src="https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4" type="video/mp4">
                    Browser Anda tidak mendukung pemutar video.
                </video>
                
                <div class="absolute inset-0 flex items-center justify-center" id="playOverlay">
                    <button onclick="togglePlayPause()" class="bg-black/50 hover:bg-black/70 text-white rounded-full p-4 transition-colors">
                        <svg class="w-12 h-12" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                    </button>
                </div>

                <div class="absolute bottom-0 left-0 right-0 video-controls p-4" id="videoControls">
                    <!-- Progress Bar -->
                    <div class="mb-4">
                        <input
                            type="range"
                            min="0"
                            max="100"
                            value="${(currentTime / duration) * 100}"
                            onchange="seekVideo(this.value)"
                            class="w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer slider"
                            id="progressBar"
                        />
                    </div>

                    <!-- Control Buttons -->
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <!-- Play/Pause -->
                            <button onclick="togglePlayPause()" class="text-white hover:text-dramabox-amber transition-colors">
                                <svg id="playPauseIcon" class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M8 5v14l11-7z"/>
                                </svg>
                            </button>

                            <!-- Time Display -->
                            <div class="text-white text-sm">
                                <span id="currentTime">0:00</span> / <span id="totalTime">60:00</span>
                            </div>

                            <!-- Volume -->
                            <div class="flex items-center space-x-2">
                                <button onclick="toggleMute()" class="text-white hover:text-dramabox-amber transition-colors">
                                    <svg id="volumeIcon" class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                                    </svg>
                                </button>
                                <input
                                    type="range"
                                    min="0"
                                    max="1"
                                    step="0.1"
                                    value="${volume}"
                                    onchange="setVolume(this.value)"
                                    class="w-20 h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer"
                                />
                            </div>
                        </div>

                        <div class="flex items-center space-x-4">
                            <!-- Quality Selector -->
                            <select onchange="setQuality(this.value)" class="bg-gray-800 text-white text-sm rounded px-2 py-1 border border-gray-600">
                                <option value="480p">480p</option>
                                <option value="720p" selected>720p</option>
                                <option value="1080p">1080p</option>
                            </select>

                            <!-- Speed Selector -->
                            <select onchange="setPlaybackSpeed(this.value)" class="bg-gray-800 text-white text-sm rounded px-2 py-1 border border-gray-600">
                                <option value="0.5">0.5x</option>
                                <option value="1" selected>1x</option>
                                <option value="1.25">1.25x</option>
                                <option value="1.5">1.5x</option>
                                <option value="2">2x</option>
                            </select>

                            <!-- Episode Selector -->
                            <button onclick="toggleEpisodeSelector()" class="text-white hover:text-dramabox-amber transition-colors">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
                                </svg>
                            </button>

                            <!-- Fullscreen -->
                            <button onclick="toggleFullscreen()" class="text-white hover:text-dramabox-amber transition-colors">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            `;

            // Setup video event listeners
            setTimeout(() => {
                const video = document.getElementById('videoElement');
                if (video) {
                    video.addEventListener('timeupdate', updateTimeDisplay);
                    video.addEventListener('loadedmetadata', updateDuration);
                    video.addEventListener('play', () => isPlaying = true);
                    video.addEventListener('pause', () => isPlaying = false);
                    video.volume = volume;
                    video.playbackRate = playbackSpeed;
                }
            }, 100);
        }

        function loadDramaInfo() {
            const drama = {
                title: 'Pewaris Takhta',
                description: 'Sebuah kisah epik tentang perebutan takhta dan cinta yang melambungkan nama pemerannya ke puncak popularitas. Drama ini mengisahkan perjuangan seorang pewaris muda dalam mempertahankan tahta kerajaan yang menjadi haknya.',
                rating: 9.2,
                year: 2024,
                genre: 'Historical',
                episodes: 24,
                cast: ['Kim Soo Hyun', 'Song Hye Kyo', 'Lee Min Ho', 'Park Shin Hye'],
                director: 'Lee Joon Ik',
                duration: '60 menit per episode'
            };

            const container = document.getElementById('dramaDetails');
            container.innerHTML = `
                <h1 class="text-3xl font-display font-bold text-white mb-4">${drama.title}</h1>
                
                <div class="flex flex-wrap items-center gap-4 mb-6">
                    <span class="bg-dramabox-amber text-white px-3 py-1 rounded-full text-sm font-semibold">
                        ⭐ ${drama.rating}
                    </span>
                    <span class="bg-gray-700 text-white px-3 py-1 rounded-full text-sm">
                        ${drama.year}
                    </span>
                    <span class="bg-gray-700 text-white px-3 py-1 rounded-full text-sm">
                        ${drama.genre}
                    </span>
                    <span class="bg-gray-700 text-white px-3 py-1 rounded-full text-sm">
                        ${drama.episodes} Episode
                    </span>
                </div>

                <p class="text-gray-300 text-lg leading-relaxed mb-6">
                    ${drama.description}
                </p>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-white font-semibold mb-3">Pemeran</h3>
                        <div class="space-y-2">
                            ${drama.cast.map(actor => `
                                <span class="inline-block bg-gray-800 text-gray-300 px-3 py-1 rounded-full text-sm mr-2 mb-2">
                                    ${actor}
                                </span>
                            `).join('')}
                        </div>
                    </div>
                    <div>
                        <h3 class="text-white font-semibold mb-3">Informasi</h3>
                        <div class="space-y-2 text-gray-300">
                            <p><span class="text-gray-400">Sutradara:</span> ${drama.director}</p>
                            <p><span class="text-gray-400">Durasi:</span> ${drama.duration}</p>
                            <p><span class="text-gray-400">Episode Saat Ini:</span> ${currentEpisode}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function loadEpisodeList() {
            const container = document.getElementById('episodeList');
            const episodes = Array.from({ length: totalEpisodes }, (_, i) => ({
                episode: i + 1,
                title: `Episode ${i + 1}`,
                duration: '60:00'
            }));

            container.innerHTML = `
                <h3 class="text-xl font-semibold text-white mb-4">Daftar Episode</h3>
                <div class="space-y-2 max-h-96 overflow-y-auto">
                    ${episodes.map(episode => `
                        <button
                            onclick="selectEpisode(${episode.episode})"
                            class="w-full text-left p-3 rounded-lg transition-colors ${
                                currentEpisode === episode.episode
                                    ? 'bg-dramabox-amber text-white'
                                    : 'bg-gray-800 text-gray-300 hover:bg-gray-700'
                            }"
                        >
                            <div class="flex items-center justify-between">
                                <div>
                                    <div class="font-semibold">${episode.title}</div>
                                    <div class="text-sm opacity-75">Episode ${episode.episode}</div>
                                </div>
                                <div class="text-sm opacity-75">${episode.duration}</div>
                            </div>
                        </button>
                    `).join('')}
                </div>
            `;
        }

        function loadRelatedDramas() {
            const relatedDramas = [
                { id: '41000104020', title: 'Kerajaan Cinta', rating: 8.9, year: 2024, genre: 'Historical', episodes: 20 },
                { id: '41000104021', title: 'Takhta dan Hati', rating: 8.6, year: 2024, genre: 'Romance', episodes: 18 },
                { id: '41000104022', title: 'Perjuangan Tahta', rating: 8.8, year: 2024, genre: 'Drama', episodes: 22 },
                { id: '41000104023', title: 'Cinta Sejati', rating: 8.5, year: 2024, genre: 'Historical', episodes: 16 }
            ];

            const container = document.getElementById('relatedDramas');
            container.innerHTML = relatedDramas.map(drama => createDramaCard(drama)).join('');
        }

        function createDramaCard(drama) {
            return `
                <div class="drama-card bg-gray-800 rounded-lg overflow-hidden cursor-pointer group" onclick="goToStream('${drama.id}')">
                    <div class="relative overflow-hidden">
                        <div class="h-64 bg-gray-700 shimmer">
                            <img src="https://images.unsplash.com/photo-${Math.floor(Math.random() * 1000000000000)}?w=400&h=600&fit=crop" 
                                 alt="${drama.title}" 
                                 class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                                 onerror="this.style.display='none'">
                        </div>
                        
                        <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <div class="absolute bottom-4 left-4 right-4">
                                <button class="bg-dramabox-amber hover:bg-amber-600 text-white rounded-full p-3 transform hover:scale-110 transition-all duration-300 mb-2">
                                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M8 5v14l11-7z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>

                        ${drama.rating ? `
                            <div class="absolute top-2 right-2 bg-black/70 backdrop-blur-sm rounded-full px-2 py-1">
                                <span class="text-dramabox-amber text-sm font-semibold">⭐ ${drama.rating}</span>
                            </div>
                        ` : ''}

                        ${drama.episodes ? `
                            <div class="absolute top-2 left-2 bg-black/70 backdrop-blur-sm rounded-full px-2 py-1">
                                <span class="text-white text-xs font-medium">${drama.episodes} eps</span>
                            </div>
                        ` : ''}
                    </div>

                    <div class="p-4">
                        <h3 class="font-semibold text-white mb-2 line-clamp-2 group-hover:text-dramabox-amber transition-colors">
                            ${drama.title}
                        </h3>
                        
                        <div class="flex items-center justify-between text-sm text-gray-500">
                            ${drama.year ? `<span>${drama.year}</span>` : ''}
                            ${drama.genre ? `<span class="bg-gray-700 px-2 py-1 rounded">${drama.genre}</span>` : ''}
                        </div>
                    </div>
                </div>
            `;
        }

        // Video Player Functions
        function togglePlayPause() {
            const video = document.getElementById('videoElement');
            const icon = document.getElementById('playPauseIcon');
            const overlay = document.getElementById('playOverlay');
            
            if (video.paused) {
                video.play();
                icon.innerHTML = '<path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>';
                overlay.style.display = 'none';
            } else {
                video.pause();
                icon.innerHTML = '<path d="M8 5v14l11-7z"/>';
                overlay.style.display = 'flex';
            }
        }

        function updateTimeDisplay() {
            const video = document.getElementById('videoElement');
            const currentTimeEl = document.getElementById('currentTime');
            const progressBar = document.getElementById('progressBar');
            
            if (video && currentTimeEl) {
                currentTime = video.currentTime;
                currentTimeEl.textContent = formatTime(currentTime);
                progressBar.value = (currentTime / duration) * 100;
            }
        }

        function updateDuration() {
            const video = document.getElementById('videoElement');
            const totalTimeEl = document.getElementById('totalTime');
            
            if (video && totalTimeEl && video.duration) {
                duration = video.duration;
                totalTimeEl.textContent = formatTime(duration);
            }
        }

        function seekVideo(value) {
            const video = document.getElementById('videoElement');
            if (video) {
                video.currentTime = (value / 100) * duration;
            }
        }

        function toggleMute() {
            const video = document.getElementById('videoElement');
            const icon = document.getElementById('volumeIcon');
            
            if (video.muted) {
                video.muted = false;
                icon.innerHTML = '<path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>';
            } else {
                video.muted = true;
                icon.innerHTML = '<path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>';
            }
        }

        function setVolume(value) {
            const video = document.getElementById('videoElement');
            if (video) {
                video.volume = parseFloat(value);
                volume = parseFloat(value);
            }
        }

        function setQuality(value) {
            showNotification(`Kualitas video diubah ke ${value}`, 'info');
        }

        function setPlaybackSpeed(value) {
            const video = document.getElementById('videoElement');
            if (video) {
                video.playbackRate = parseFloat(value);
                playbackSpeed = parseFloat(value);
            }
        }

        function toggleFullscreen() {
            const videoContainer = document.getElementById('videoPlayer');
            if (videoContainer.requestFullscreen) {
                videoContainer.requestFullscreen();
            }
        }

        function toggleEpisodeSelector() {
            const selector = document.getElementById('episodeSelector');
            selector.classList.toggle('hidden');
        }

        function selectEpisode(episode) {
            currentEpisode = episode;
            
            // Update URL
            const url = new URL(window.location);
            url.searchParams.set('episode', episode);
            window.history.replaceState({}, '', url);
            
            // Reload page data
            loadDramaInfo();
            loadEpisodeList();
            
            showNotification(`Beralih ke Episode ${episode}`, 'success');
        }

        function formatTime(time) {
            const minutes = Math.floor(time / 60);
            const seconds = Math.floor(time % 60);
            return `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }
    </script>
</body>
</html>